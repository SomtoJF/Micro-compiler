(()=>{"use strict";!function(e){console.log("compiling...");var r=function(e){for(var r=[],t=0;t<e.length;t++){var a=e.charAt(t);if("("!==a)if(")"!==a){if(!/\s/.test(a)){var n=/[0-9]/;if(n.test(a)){for(var p="";n.test(a);)p+=a,a=e[++t];r.push({type:"number",value:p}),--t}else if('"'!==a){var u=/[a-z]/i;if(!u.test(a))throw new TypeError("Micro-compiler cannot identify this character: "+a);for(p="";u.test(a);)p+=a,a=e[++t];r.push({type:"name",value:p})}else{for(p="",a=e[++t];'"'!==a;)p+=a,a=e[++t];r.push({type:"string",value:p})}}}else r.push({type:"paren",value:")"});else r.push({type:"paren",value:"("})}return r}("(add 2 (subtract 6 4))"),t=function(e){for(var r=0,t=function(){var a=e[r];if("number"===a.type)return r++,{type:"NumberLiteral",value:a.value};if("string"===a.type)return r++,{type:"StringLiteral",value:a.value};if("paren"===a.type&&"("===a.value){var n={type:"CallExpression",name:(a=e[++r]).value,params:[]};for(a=e[++r];"paren"!==a.type||"paren"===a.type&&")"!==a.value;)n.params.push(t()),a=e[r];return r++,n}throw new TypeError(a.type)},a={type:"Program",body:[]};r<e.length;)a.body.push(t());return a}(r);console.log(t.body)}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJvQkFLQSxTQUFpQkEsR0FDYkMsUUFBUUMsSUFBSSxnQkFDWixJQUFNQyxFQ0xWLFNBQW1CSCxHQUdmLElBRkEsSUFBSUksRUFBOEIsR0FFekJDLEVBQVUsRUFBR0EsRUFBVUwsRUFBTU0sT0FBUUQsSUFBVyxDQUNyRCxJQUFJRSxFQUFPUCxFQUFNUSxPQUFPSCxHQUV4QixHQUFhLE1BQVRFLEVBS0osR0FBYSxNQUFUQSxHQU1KLElBRGlCLEtBQ0ZFLEtBQUtGLEdBQXBCLENBSUEsSUFBSUcsRUFBVSxRQUNkLEdBQUlBLEVBQVFELEtBQUtGLEdBQWpCLENBT0ksSUFOQSxJQUFJSSxFQUFRLEdBTUxELEVBQVFELEtBQUtGLElBQ2hCSSxHQUFTSixFQUNUQSxFQUFPUCxJQUFRSyxHQUluQkQsRUFBT1EsS0FBSyxDQUFFQyxLQUFNLFNBQVVGLE1BQUssTUFJakNOLEMsTUFZTixHQUFhLE1BQVRFLEVBQUosQ0FjQSxJQUFNTyxFQUFVLFNBQ2hCLElBQUlBLEVBQVFMLEtBQUtGLEdBU2pCLE1BQU0sSUFBSVEsVUFDTixrREFBb0RSLEdBUnBELElBRElJLEVBQVEsR0FDTEcsRUFBUUwsS0FBS0YsSUFDaEJJLEdBQVNKLEVBQ1RBLEVBQU9QLElBQVFLLEdBRW5CRCxFQUFPUSxLQUFLLENBQUVDLEtBQU0sT0FBUUYsTUFBSyxHLEtBckJyQyxDQUtJLElBSklBLEVBQVEsR0FFWkosRUFBT1AsSUFBUUssR0FFQyxNQUFURSxHQUNISSxHQUFTSixFQUNUQSxFQUFPUCxJQUFRSyxHQUduQkQsRUFBT1EsS0FBSyxDQUFFQyxLQUFNLFNBQVVGLE1BQUssRyxRQWpEbkNQLEVBQU9RLEtBQUssQ0FBRUMsS0FBTSxRQUFTRixNQUFPLFdBTHBDUCxFQUFPUSxLQUFLLENBQUVDLEtBQU0sUUFBU0YsTUFBTyxLLENBd0U1QyxPQUFPUCxDQUNYLENEM0VtQixDQUpMLDBCQUtKWSxFRU5WLFNBQWdCWixHQXdEWixJQXZEQSxJQUFJQyxFQUFVLEVBRVJZLEVBQU8sV0FDVCxJQUFJQyxFQUFRZCxFQUFPQyxHQUVuQixHQUFtQixXQUFmYSxFQUFNTCxLQUVOLE9BREFSLElBQ08sQ0FDSFEsS0FBTSxnQkFDTkYsTUFBT08sRUFBTVAsT0FJckIsR0FBbUIsV0FBZk8sRUFBTUwsS0FFTixPQURBUixJQUNPLENBQ0hRLEtBQU0sZ0JBQ05GLE1BQU9PLEVBQU1QLE9BSXJCLEdBQW1CLFVBQWZPLEVBQU1MLE1BQW9DLE1BQWhCSyxFQUFNUCxNQUFlLENBSS9DLElBQUlRLEVBQVksQ0FDWk4sS0FBTSxpQkFDTk8sTUFKSkYsRUFBUWQsSUFBU0MsSUFJRE0sTUFDWlUsT0FBUSxJQUtaLElBREFILEVBQVFkLElBQVNDLEdBRUUsVUFBZmEsRUFBTUwsTUFDVSxVQUFmSyxFQUFNTCxNQUFvQyxNQUFoQkssRUFBTVAsT0FJakNRLEVBQUtFLE9BQU9ULEtBQUtLLEtBQ2pCQyxFQUFRZCxFQUFPQyxHQUluQixPQURBQSxJQUNPYyxDLENBR1gsTUFBTSxJQUFJSixVQUFVRyxFQUFNTCxLQUM5QixFQUVJUyxFQUFvQixDQUNwQlQsS0FBTSxVQUNOVSxLQUFNLElBR0hsQixFQUFVRCxFQUFPRSxRQUNwQmdCLEVBQUlDLEtBQUtYLEtBQUtLLEtBR2xCLE9BQU9LLENBQ1gsQ0Z2RGdCLENBQU9uQixHQUNuQkYsUUFBUUMsSUFBSWMsRUFBSU8sS0FDcEIsQ0FFQUMsRSIsInNvdXJjZXMiOlsid2VicGFjazovL01pY3JvLWNvbXBpbGVyLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vTWljcm8tY29tcGlsZXIvLi9zcmMvVG9rZW5pemVyLnRzIiwid2VicGFjazovL01pY3JvLWNvbXBpbGVyLy4vc3JjL1BhcnNlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdG9rZW5pemUgZnJvbSAnLi9Ub2tlbml6ZXInO1xuaW1wb3J0IHBhcnNlciBmcm9tICcuL1BhcnNlcic7XG5cbmNvbnN0IGlucHV0ID0gJyhhZGQgMiAoc3VidHJhY3QgNiA0KSknO1xuXG5mdW5jdGlvbiBjb21waWxlKGlucHV0OiBzdHJpbmcpIHtcbiAgICBjb25zb2xlLmxvZygnY29tcGlsaW5nLi4uJyk7XG4gICAgY29uc3QgVE9LRU5TID0gdG9rZW5pemUoaW5wdXQpO1xuICAgIGNvbnN0IEFTVCA9IHBhcnNlcihUT0tFTlMpO1xuICAgIGNvbnNvbGUubG9nKEFTVC5ib2R5KTtcbn1cblxuY29tcGlsZShpbnB1dCk7XG4iLCJpbXBvcnQgeyB0b2tlbml6ZXJSZXR1cm5UeXBlIH0gZnJvbSAnLi9UeXBlcyc7XG5cbmZ1bmN0aW9uIHRva2VuaXplcihpbnB1dDogc3RyaW5nKTogdG9rZW5pemVyUmV0dXJuVHlwZSB7XG4gICAgbGV0IHRva2VuczogdG9rZW5pemVyUmV0dXJuVHlwZSA9IFtdO1xuXG4gICAgZm9yIChsZXQgY3VycmVudCA9IDA7IGN1cnJlbnQgPCBpbnB1dC5sZW5ndGg7IGN1cnJlbnQrKykge1xuICAgICAgICBsZXQgY2hhciA9IGlucHV0LmNoYXJBdChjdXJyZW50KTtcblxuICAgICAgICBpZiAoY2hhciA9PT0gJygnKSB7XG4gICAgICAgICAgICB0b2tlbnMucHVzaCh7IHR5cGU6ICdwYXJlbicsIHZhbHVlOiAnKCcgfSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGFyID09PSAnKScpIHtcbiAgICAgICAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogJ3BhcmVuJywgdmFsdWU6ICcpJyB9KTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IFdISVRFU1BBQ0UgPSAvXFxzLztcbiAgICAgICAgaWYgKFdISVRFU1BBQ0UudGVzdChjaGFyKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgTlVNQkVSUyA9IC9bMC05XS87XG4gICAgICAgIGlmIChOVU1CRVJTLnRlc3QoY2hhcikpIHtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9ICcnO1xuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIExvb3AgdGhyb3VnaCBlYWNoIGNoYXJhY3RlciBpbiB0aGUgc2VxdWVuY2UgdW50aWwgd2UgZW5jb3VudGVyIGEgY2hhcmFjdGVyIHRoYXRcbiAgICAgICAgICAgICAqIGlzIG5vdCBhIG51bWJlciwgcHVzaGluZyBlYWNoIGNoYXJhdGVyIHRoYXQgaXMgYSBudW1iZXIgdG8gb3VyIHZhbHVlIGFuZCBpbmNyZW1lbnRpbmdcbiAgICAgICAgICAgICAqIGBjdXJyZW50YCBhcyB3ZSBnb1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB3aGlsZSAoTlVNQkVSUy50ZXN0KGNoYXIpKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgKz0gY2hhcjtcbiAgICAgICAgICAgICAgICBjaGFyID0gaW5wdXRbKytjdXJyZW50XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWZ0ZXIgdGhhdCB3ZSBwdXNoIG91ciBgbnVtYmVyYCB0b2tlbiB0byB0aGUgYHRva2Vuc2AgYXJyYXkuXG4gICAgICAgICAgICB0b2tlbnMucHVzaCh7IHR5cGU6ICdudW1iZXInLCB2YWx1ZSB9KTtcblxuICAgICAgICAgICAgLy8gQW5kIHdlIGNvbnRpbnVlIG9uLlxuICAgICAgICAgICAgLy8gY3VycmVudCBpcyB0aGUgY2hhciBhZnRlciB0aGUgbnVtYmVyIHNvIHdlIG5lZWQgdG8gZGVjcmVtZW50IGl0IHNvIHRoYXQgY2hhciBnZXRzIHRva2VuaXplZFxuICAgICAgICAgICAgLS1jdXJyZW50O1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSdsbCBhbHNvIGFkZCBzdXBwb3J0IGZvciBzdHJpbmdzIGluIG91ciBsYW5ndWFnZSB3aGljaCB3aWxsIGJlIGFueVxuICAgICAgICAvLyB0ZXh0IHN1cnJvdW5kZWQgYnkgZG91YmxlIHF1b3RlcyAoXCIpLlxuICAgICAgICAvL1xuICAgICAgICAvLyAgIChjb25jYXQgXCJmb29cIiBcImJhclwiKVxuICAgICAgICAvLyAgICAgICAgICAgIF5eXiAgIF5eXiBzdHJpbmcgdG9rZW5zXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFdlJ2xsIHN0YXJ0IGJ5IGNoZWNraW5nIGZvciB0aGUgb3BlbmluZyBxdW90ZTpcblxuICAgICAgICBpZiAoY2hhciA9PT0gJ1wiJykge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gJyc7XG5cbiAgICAgICAgICAgIGNoYXIgPSBpbnB1dFsrK2N1cnJlbnRdO1xuXG4gICAgICAgICAgICB3aGlsZSAoY2hhciAhPT0gJ1wiJykge1xuICAgICAgICAgICAgICAgIHZhbHVlICs9IGNoYXI7XG4gICAgICAgICAgICAgICAgY2hhciA9IGlucHV0WysrY3VycmVudF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogJ3N0cmluZycsIHZhbHVlIH0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBMRVRURVJTID0gL1thLXpdL2k7XG4gICAgICAgIGlmIChMRVRURVJTLnRlc3QoY2hhcikpIHtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9ICcnO1xuICAgICAgICAgICAgd2hpbGUgKExFVFRFUlMudGVzdChjaGFyKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlICs9IGNoYXI7XG4gICAgICAgICAgICAgICAgY2hhciA9IGlucHV0WysrY3VycmVudF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b2tlbnMucHVzaCh7IHR5cGU6ICduYW1lJywgdmFsdWUgfSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICAgJ01pY3JvLWNvbXBpbGVyIGNhbm5vdCBpZGVudGlmeSB0aGlzIGNoYXJhY3RlcjogJyArIGNoYXJcbiAgICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRva2Vucztcbn1cblxuZXhwb3J0IGRlZmF1bHQgdG9rZW5pemVyO1xuIiwiaW1wb3J0IHsgdG9rZW5pemVyUmV0dXJuVHlwZSwgQVNUSW50ZXJmYWNlIH0gZnJvbSAnLi9UeXBlcyc7XG5cbmZ1bmN0aW9uIHBhcnNlcih0b2tlbnM6IHRva2VuaXplclJldHVyblR5cGUpOiBBU1RJbnRlcmZhY2Uge1xuICAgIGxldCBjdXJyZW50ID0gMDtcblxuICAgIGNvbnN0IHdhbGsgPSAoKSA9PiB7XG4gICAgICAgIGxldCB0b2tlbiA9IHRva2Vuc1tjdXJyZW50XTtcblxuICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ051bWJlckxpdGVyYWwnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB0b2tlbi52YWx1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ1N0cmluZ0xpdGVyYWwnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB0b2tlbi52YWx1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gJ3BhcmVuJyAmJiB0b2tlbi52YWx1ZSA9PT0gJygnKSB7XG4gICAgICAgICAgICAvLyBJbmNyZW1lbnQgJ2N1cnJlbnQnIHRvIGdldCB0aGUgbmFtZSBvZiB0aGUgQ2FsbEV4cHJlc3Npb25cbiAgICAgICAgICAgIHRva2VuID0gdG9rZW5zWysrY3VycmVudF07XG5cbiAgICAgICAgICAgIGxldCBub2RlOiBhbnkgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ0NhbGxFeHByZXNzaW9uJyxcbiAgICAgICAgICAgICAgICBuYW1lOiB0b2tlbi52YWx1ZSxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IFtdLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gSW5jcmVtZW50IHRva2VuIGFnYWluIHRvIGdldCB0aGUgZmlyc3QgcGFyYW1hdGVyIG9mIHRoZSBjYWxsIGV4cHJlc3Npb25cbiAgICAgICAgICAgIHRva2VuID0gdG9rZW5zWysrY3VycmVudF07XG4gICAgICAgICAgICB3aGlsZSAoXG4gICAgICAgICAgICAgICAgdG9rZW4udHlwZSAhPT0gJ3BhcmVuJyB8fFxuICAgICAgICAgICAgICAgICh0b2tlbi50eXBlID09PSAncGFyZW4nICYmIHRva2VuLnZhbHVlICE9PSAnKScpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAvLyB3ZSdsbCBjYWxsIHRoZSBgd2Fsa2AgZnVuY3Rpb24gd2hpY2ggd2lsbCByZXR1cm4gYSBgbm9kZWAgYW5kIHdlJ2xsXG4gICAgICAgICAgICAgICAgLy8gcHVzaCBpdCBpbnRvIG91ciBgbm9kZS5wYXJhbXNgLlxuICAgICAgICAgICAgICAgIG5vZGUucGFyYW1zLnB1c2god2FsaygpKTtcbiAgICAgICAgICAgICAgICB0b2tlbiA9IHRva2Vuc1tjdXJyZW50XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3VycmVudCsrO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHRva2VuLnR5cGUpO1xuICAgIH07XG5cbiAgICBsZXQgYXN0OiBBU1RJbnRlcmZhY2UgPSB7XG4gICAgICAgIHR5cGU6ICdQcm9ncmFtJyxcbiAgICAgICAgYm9keTogW10sXG4gICAgfTtcblxuICAgIHdoaWxlIChjdXJyZW50IDwgdG9rZW5zLmxlbmd0aCkge1xuICAgICAgICBhc3QuYm9keS5wdXNoKHdhbGsoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFzdDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgcGFyc2VyO1xuIl0sIm5hbWVzIjpbImlucHV0IiwiY29uc29sZSIsImxvZyIsIlRPS0VOUyIsInRva2VucyIsImN1cnJlbnQiLCJsZW5ndGgiLCJjaGFyIiwiY2hhckF0IiwidGVzdCIsIk5VTUJFUlMiLCJ2YWx1ZSIsInB1c2giLCJ0eXBlIiwiTEVUVEVSUyIsIlR5cGVFcnJvciIsIkFTVCIsIndhbGsiLCJ0b2tlbiIsIm5vZGUiLCJuYW1lIiwicGFyYW1zIiwiYXN0IiwiYm9keSIsImNvbXBpbGUiXSwic291cmNlUm9vdCI6IiJ9